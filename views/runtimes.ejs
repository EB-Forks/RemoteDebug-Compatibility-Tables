
<div class="row">
  <div class="col-md-4">
    <h4>Runtimes</h4>
    <% for (i=0; i < runtimes.length - 1; i++) { %>
      <% var isEnabled = filter.runtimes.includes(runtimes[i].name) %>
      <p><input type="checkbox" <%= isEnabled ? 'checked' : '' %> data-name="<%= runtimes[i].name %>" data-index="<%= i %>" /> <%= runtimes[i].name %></p>
    <% } %>
  </div>
</div>

<script>
  function updateUrl() {
    var state = []
    document.querySelectorAll('input[type=checkbox]').forEach(function(elmBox) {
      if(elmBox.checked) {
        state.push(elmBox.attributes['data-name'].value.trim())
      }
    })

    var newUrl = location.origin + location.pathname + '?runtimes=' + state.join(',')
    location.href = newUrl
  }

  document.querySelectorAll('input[type=checkbox]').forEach(function(elmBox) {
    elmBox.addEventListener('change', function() {
      updateUrl();
    })
  })
</script>